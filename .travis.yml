dist: xenial
sudo: false

language: python

git:
  depth: false

python:
  - 3.7

install:
  - git config remote.origin.fetch +refs/heads/*:refs/remotes/origin/*
  - git fetch --unshallow --tags
  - pipenv install

script:
- pipenv run build

deploy:
  provider: pages
  fqdn: renaissance.pub
  github-token: $GITHUB_TOKEN
  local-dir: build

  skip-cleanup: true

  target-branch: master
  on:
    branch: source
